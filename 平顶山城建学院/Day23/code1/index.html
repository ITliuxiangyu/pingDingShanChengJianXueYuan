<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <div ng-controller="ParentController">

        <h2>{{ animal }}</h2>


        <div ng-controller="ChildController">

            <h2>{{ name }}</h2>

            <button ng-click="emit()">å‘çˆ¶çº§ä¼ æ’­</button>

        </div>


    </div>


</body>
</html>
<script src="../lib/angular.js"></script>
<script>
    
    angular.module('myApp', [])
            .controller('ParentController', ['$scope', function ($scope) {


                // $onç›‘å¬æ¶ˆæ¯
                // ç¬¬ä¸€ä¸ªå‚æ•°: æ¶ˆæ¯çš„åç§°
                // ç¬¬äºŒä¸ªå‚æ•°: å›è°ƒå‡½æ•°, ç¬¬ä¸€ä¸ªå‚æ•°: äº‹ä»¶å¯¹è±¡, ç¬¬äºŒä¸ªå‚æ•°: æ¶ˆæ¯å†…å®¹
                $scope.$on("hello", function (event, msg) {

                    console.log(event);
                    console.log(msg);

                    // targetScope
                    // ä¼ æ’­äº‹ä»¶çš„ä½œç”¨åŸŸ
                    console.log(event.targetScope.name);

                    event.targetScope.name = "å¼ æ­£";

                    // currentScope
                    // å½“å‰çš„ä½œç”¨åŸŸ
                    event.currentScope.animal = "ğŸ©";

                    // äº‹ä»¶åå­—
                    console.log(event.name);


                });


                
            }])
            .controller('ChildController', ['$scope', function ($scope) {

                $scope.emit = function () {

                    // $emit æœåŠ¡: è®©äº‹ä»¶ä»å­ä½œç”¨åŸŸä¼ é€’åˆ°çˆ¶ä½œç”¨åŸŸ
                    // ç¬¬ä¸€ä¸ªå‚æ•°: æ¶ˆæ¯çš„åç§°
                    // ç¬¬äºŒä¸ªå‚æ•°: æ¶ˆæ¯ (å¯ä»¥ä¸ºå­—ç¬¦ä¸², æ•°ç»„, å¯¹è±¡)
//                    $scope.$emit('hello', 'world');
                    $scope.$emit("hello", {name: "æ­ªå“¥", age: 18});
                };
                $scope.name = "æ­ªå“¥";

                
            }]);






</script>